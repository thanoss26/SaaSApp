<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="organizations:organization_details">Chronos HR - Organization Management</title>
  <link rel="stylesheet" href="css/dashboard.css?v=1.0.1">
  <link rel="stylesheet" href="css/shared.css?v=1.0.1">
  <link rel="stylesheet" href="css/enhanced-sidebar.css?v=1.0.1">
  <link rel="stylesheet" href="css/organizations.css?v=1.0.1">
  <link rel="stylesheet" href="css/language-switcher.css?v=1.0.1">
  <link rel="stylesheet" href="css/mailbox.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="dashboard-bg">
  <div class="dashboard-layout">
    <!-- Sidebar -->
    <aside class="enhanced-sidebar" id="enhanced-sidebar">
      <div class="enhanced-sidebar-header">
        <div class="enhanced-sidebar-logo">
          <div class="logo-icon">⏱️</div>
          <span class="logo-text">Chronos HR</span>
        </div>
        <div class="enhanced-sidebar-controls">
          <button class="enhanced-sidebar-toggle" id="enhanced-sidebar-toggle">
            <i class="fas fa-bars"></i>
          </button>
          <button class="enhanced-theme-toggle" id="theme-toggle">
            <i class="fas fa-moon" id="theme-icon"></i>
          </button>
        </div>
      </div>

      <nav class="enhanced-sidebar-nav">
        <a href="/dashboard" class="nav-item" data-page="dashboard">
          <i class="fas fa-tachometer-alt"></i>
          <span data-i18n="common:dashboard">Dashboard</span>
        </a>
        <a href="/analytics" class="nav-item" data-page="analytics">
          <i class="fas fa-chart-bar"></i>
          <span data-i18n="common:analytics">Analytics</span>
        </a>
        <a href="/users" class="nav-item" data-page="users">
          <i class="fas fa-users"></i>
          <span data-i18n="common:users">User Management</span>
        </a>
        <a href="/payroll" class="nav-item" data-page="payroll">
          <i class="fas fa-dollar-sign"></i>
          <span data-i18n="common:payroll">Payroll</span>
        </a>
        <a href="/organizations" class="nav-item active" data-page="organizations">
          <i class="fas fa-building"></i>
          <span data-i18n="common:organizations">Organizations</span>
        </a>
        <a href="/settings" class="nav-item" data-page="settings">
          <i class="fas fa-cog"></i>
          <span data-i18n="common:settings">Settings</span>
        </a>
        <a href="#" class="nav-item" data-page="mailbox" id="mailbox-nav">
          <i class="fas fa-envelope"></i>
          <span>Mailbox</span>
          <span class="mailbox-badge" id="mailbox-badge" style="display: none;">0</span>
        </a>
      </nav>

      <div class="enhanced-sidebar-footer">
        <div class="enhanced-sidebar-user">
          <div class="user-avatar">TV</div>
          <div class="user-details">
            <div class="user-name">Loading...</div>
            <div class="user-email">Loading...</div>
          </div>
        </div>
        <button class="enhanced-logout-btn" id="logout-btn">
          <i class="fas fa-sign-out-alt"></i>
          <span data-i18n="common:logout">Log out</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="dashboard-main">
      <!-- Topbar -->
      <header class="dashboard-topbar">
        <h1 class="dashboard-title" data-i18n="organizations:organization_details">Organization Management</h1>
        <div class="dashboard-search">
          <input type="text" data-i18n-placeholder="organizations:member_search" placeholder="Search members..." id="member-search" />
          <i class="fas fa-search"></i>
        </div>
        <div class="dashboard-user">
          <img src="https://ui-avatars.com/api/?name=U&background=4e8cff&color=fff&size=48" alt="User"
            class="user-avatar" />
          <div class="user-info">
            <span class="user-name">Loading...</span>
            <span class="user-role">Loading...</span>
          </div>
          <i class="fas fa-chevron-down"></i>
        </div>
      </header>

      <!-- Organization Content -->
      <section class="dashboard-content">
        <!-- Loading State -->
        <div id="loading-state" class="loading-container">
          <div class="loading-spinner"></div>
          <p data-i18n="common:loading">Loading organization information...</p>
        </div>

        <!-- Error State -->
        <div id="error-state" class="error-container" style="display: none;">
          <div class="error-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <h3 data-i18n="common:error">Unable to Load Organization</h3>
          <p id="error-message" data-i18n="common:error">An error occurred while loading organization information.</p>
          <button class="btn-primary" id="retry-btn" data-i18n="common:retry">Try Again</button>
        </div>

        <!-- Organization Information -->
        <div id="organization-content" style="display: none;">
          <!-- Organization Header -->
          <div class="org-header">
            <div class="org-info">
              <div class="org-avatar">
                <i class="fas fa-building"></i>
              </div>
              <div class="org-details">
                <h2 id="org-name">Organization Name</h2>
                <p id="org-description">Organization description</p>
                <div class="org-meta">
                  <span class="org-meta-item">
                    <i class="fas fa-calendar"></i>
                    Created: <span id="org-created">Loading...</span>
                  </span>
                  <span class="org-meta-item">
                    <i class="fas fa-users"></i>
                    <span id="org-member-count">0</span> <span data-i18n="organizations:members">Members</span>
                  </span>
                </div>
              </div>
            </div>
            <div class="org-actions">
              <button class="btn-primary" id="invite-members-btn" style="display: none;">
                <i class="fas fa-user-plus"></i>
                <span data-i18n="organizations:invite_members">Invite Members</span>
              </button>
              <button class="btn-primary" id="add-member-btn" style="display: none;">
                <i class="fas fa-user-plus"></i>
                <span data-i18n="organizations:add_member">Add Member</span>
              </button>
              <button class="btn-secondary" id="edit-org-btn" style="display: none;">
                <i class="fas fa-edit"></i>
                <span data-i18n="organizations:edit_organization">Edit Organization</span>
              </button>
            </div>
          </div>

          <!-- Organization Creator -->
          <div class="org-creator-section">
            <h3 data-i18n="organizations:organization_creator">Organization Creator</h3>
            <div class="creator-card" id="creator-card">
              <div class="creator-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="creator-info">
                <h4 id="creator-name">Loading...</h4>
                <p id="creator-email">Loading...</p>
                <span class="creator-role" data-i18n="organizations:organization_creator">Creator</span>
              </div>
            </div>
          </div>

          <!-- Organization Members -->
          <div class="org-members-section">
            <div class="section-header">
              <h3 data-i18n="organizations:member_list">Organization Members</h3>
              <div class="member-filters">
                <select id="role-filter" class="filter-select">
                  <option value="" data-i18n="common:all_roles">All Roles</option>
                  <option value="admin" data-i18n="common:admin">Admin</option>
                  <option value="manager" data-i18n="common:manager">Manager</option>
                  <option value="organization_member" data-i18n="common:organization_member">Organization Member</option>
                  <option value="employee" data-i18n="common:employee">Employee</option>
                </select>
                <select id="status-filter" class="filter-select">
                  <option value="" data-i18n="common:all_status">All Status</option>
                  <option value="active" data-i18n="common:active">Active</option>
                  <option value="inactive" data-i18n="common:inactive">Inactive</option>
                </select>
              </div>
            </div>

            <div class="members-grid" id="members-grid">
              <!-- Members will be populated here -->
            </div>

            <!-- No Members State -->
            <div id="no-members" class="no-members" style="display: none;">
              <div class="no-members-icon">
                <i class="fas fa-users-slash"></i>
              </div>
              <h4 data-i18n="organizations:no_members">No Members Found</h4>
              <p>This organization doesn't have any members yet.</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Edit Organization Modal -->
  <div id="edit-org-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Edit Organization</h3>
        <button class="modal-close" id="close-edit-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="edit-org-form">
          <div class="form-group">
            <label for="edit-org-name">Organization Name</label>
            <input type="text" id="edit-org-name" name="name" required>
          </div>
          <div class="form-group">
            <label for="edit-org-description">Description</label>
            <textarea id="edit-org-description" name="description" rows="3"></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="btn-danger" id="delete-org-btn">
              <i class="fas fa-trash"></i>
              Delete Organization
            </button>
            <div class="form-actions-right">
              <button type="button" class="btn-secondary" id="cancel-edit-btn">Cancel</button>
              <button type="submit" class="btn-primary">Save Changes</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div id="delete-org-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Delete Organization</h3>
        <button class="modal-close" id="close-delete-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="warning-message">
          <i class="fas fa-exclamation-triangle"></i>
          <h4>Warning: This action cannot be undone!</h4>
          <p>Deleting this organization will:</p>
          <ul>
            <li>Remove all organization data</li>
            <li>Disconnect all members from the organization</li>
            <li>Delete all associated records</li>
          </ul>
          <p><strong>Are you sure you want to delete this organization?</strong></p>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-secondary" id="cancel-delete-btn">Cancel</button>
          <button type="button" class="btn-danger" id="confirm-delete-btn">
            <i class="fas fa-trash"></i>
            Yes, Delete Organization
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Invite Members Modal -->
  <div id="invite-members-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 data-i18n="organizations:invite_members">Invite Members</h2>
        <button id="close-invite-modal" class="close-btn">&times;</button>
      </div>

      <div class="modal-body">
        <!-- Step Progress Indicator -->
        <div class="step-progress">
          <div class="step active" data-step="1">
            <div class="step-number">1</div>
            <div class="step-label" data-i18n="organizations:step_1_title">Choose Method</div>
          </div>
          <div class="step" data-step="2">
            <div class="step-number">2</div>
            <div class="step-label" data-i18n="organizations:step_2_title">Configure</div>
          </div>
          <div class="step" data-step="3">
            <div class="step-number">3</div>
            <div class="step-label" data-i18n="organizations:step_3_title">Complete</div>
          </div>
        </div>

        <!-- Step 1: Choose Invite Method -->
        <div id="step-1" class="step-content active">
          <div class="step-header">
            <h3 data-i18n="organizations:step_1_title">Choose Invitation Method</h3>
            <p data-i18n="organizations:step_1_description">Select how you'd like to invite new members to your organization</p>
          </div>
          
          <div class="invite-method-options">
            <div class="method-option" data-method="email">
              <div class="method-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <div class="method-content">
                <h4 data-i18n="organizations:email_invitation">Email Invitation</h4>
                <p data-i18n="organizations:email_invitation_description">Send personalized invitations to specific people via email</p>
                <ul class="method-features">
                  <li><i class="fas fa-check"></i> <span data-i18n="organizations:email_features_list">Personalized message</span></li>
                  <li><i class="fas fa-check"></i> <span data-i18n="organizations:email_features_list">Direct email delivery</span></li>
                  <li><i class="fas fa-check"></i> <span data-i18n="organizations:email_features_list">Track invitation status</span></li>
                </ul>
              </div>
            </div>
            
            <div class="method-option" data-method="link">
              <div class="method-icon">
                <i class="fas fa-link"></i>
              </div>
              <div class="method-content">
                <h4 data-i18n="organizations:invite_link">Invite Link</h4>
                <p data-i18n="organizations:invite_link_description">Generate a shareable link for anyone to join</p>
                <ul class="method-features">
                  <li><i class="fas fa-check"></i> <span data-i18n="organizations:link_features_list">Share anywhere</span></li>
                  <li><i class="fas fa-check"></i> <span data-i18n="organizations:link_features_list">No email required</span></li>
                  <li><i class="fas fa-check"></i> <span data-i18n="organizations:link_features_list">Set expiration date</span></li>
                </ul>
              </div>
            </div>
          </div>
          
          <div class="step-actions">
            <button type="button" id="cancel-invite-btn" class="btn-secondary" data-i18n="common:cancel">Cancel</button>
            <button type="button" id="next-step-btn" class="btn-primary" disabled data-i18n="common:next">Next Step</button>
          </div>
        </div>

        <!-- Step 2: Configure Invitation -->
        <div id="step-2" class="step-content">
          <div class="step-header">
            <h3 id="step-2-title">Configure Invitation</h3>
            <p id="step-2-description">Set up the details for your invitation</p>
        </div>

        <!-- Email Invitation Form -->
          <div id="email-invite-form" class="invite-form-section" style="display: none;">
          <form id="email-invite-form-element">
            <div class="form-group">
                <label for="invite-email" data-i18n="organizations:recipient_email">Email Address *</label>
                <input type="email" id="invite-email" name="email" required data-i18n-placeholder="organizations:recipient_email_placeholder" placeholder="Enter email address">
            </div>
            <div class="form-row">
              <div class="form-group">
                    <label for="invite-first-name" data-i18n="common:first_name">First Name *</label>
                <input type="text" id="invite-first-name" name="first_name" required placeholder="Enter first name">
              </div>
              <div class="form-group">
                    <label for="invite-last-name" data-i18n="common:last_name">Last Name *</label>
                <input type="text" id="invite-last-name" name="last_name" required placeholder="Enter last name">
              </div>
            </div>
            <div class="form-group">
                <label for="invite-role-email" data-i18n="common:role">Role</label>
              <select id="invite-role-email" name="role">
                  <option value="organization_member" data-i18n="common:organization_member">Organization Member</option>
                  <option value="employee" data-i18n="common:employee">Employee</option>
                  <option value="manager" data-i18n="common:manager">Manager</option>
              </select>
            </div>
            <div class="form-group">
                <label for="invite-message" data-i18n="organizations:custom_message">Personal Message (Optional)</label>
                <textarea id="invite-message" name="message" rows="3" data-i18n-placeholder="organizations:custom_message_placeholder" placeholder="Add a personal message to make the invitation more welcoming..."></textarea>
            </div>
          </form>
        </div>

          <!-- Link Invitation Form -->
        <div id="link-invite-form" class="invite-form-section" style="display: none;">
          <form id="link-invite-form-element">
            <div class="form-group">
                <label for="invite-role">Default Role for New Members</label>
              <select id="invite-role" name="role">
                <option value="organization_member">Organization Member</option>
                <option value="employee">Employee</option>
                <option value="manager">Manager</option>
              </select>
            </div>
            <div class="form-group">
                <label for="invite-expiry">Link Expiration</label>
              <select id="invite-expiry" name="expiry_days">
                <option value="1">1 Day</option>
                <option value="3">3 Days</option>
                <option value="7" selected>7 Days</option>
                <option value="14">14 Days</option>
                <option value="30">30 Days</option>
              </select>
            </div>
              <div class="form-group">
                <label for="invite-max-uses">Maximum Uses (Optional)</label>
                <input type="number" id="invite-max-uses" name="max_uses" min="1" placeholder="Leave empty for unlimited">
              </div>
            </form>
          </div>
          
          <div class="step-actions">
            <button type="button" id="prev-step-btn" class="btn-secondary" data-i18n="common:previous">Previous</button>
            <button type="button" id="send-invite-btn" class="btn-primary">
              <span class="btn-text" data-i18n="organizations:send_invitation">Send Invitation</span>
              <span class="btn-loading" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i>
                <span data-i18n="common:processing">Sending...</span>
              </span>
            </button>
            <button type="button" id="generate-invite-btn" class="btn-primary" style="display: none;">
              <span class="btn-text" data-i18n="organizations:generate_invite_link">Generate Link</span>
                <span class="btn-loading" style="display: none;">
                  <i class="fas fa-spinner fa-spin"></i>
                <span data-i18n="common:processing">Generating...</span>
                </span>
              </button>
            </div>
        </div>

        <!-- Step 3: Success -->
        <div id="step-3" class="step-content">
          <div class="step-header">
            <h3 id="step-3-title">Invitation Sent!</h3>
            <p id="step-3-description">Your invitation has been successfully sent</p>
          </div>
          
          <!-- Email Success -->
          <div id="email-success" class="success-content" style="display: none;">
            <div class="success-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="success-details">
              <div class="detail-item">
                <span class="detail-label">Recipient:</span>
                <span id="result-recipient" class="detail-value"></span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Role:</span>
                <span id="result-role" class="detail-value"></span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Expires:</span>
                <span id="result-expires" class="detail-value"></span>
              </div>
            </div>
            <p class="success-message">The invitation has been sent to the recipient's email address. They will receive a notification to accept or decline the invitation.</p>
        </div>

          <!-- Link Success -->
          <div id="link-success" class="success-content" style="display: none;">
            <div class="success-icon">
              <i class="fas fa-link"></i>
          </div>
            <div class="invite-link-container">
              <label>Share this link:</label>
              <div class="link-input-group">
              <input type="text" id="invite-link" readonly>
              <button id="copy-invite-link" class="btn-secondary">
                <i class="fas fa-copy"></i>
                Copy
              </button>
            </div>
            </div>
            <div class="success-details">
              <div class="detail-item">
                <span class="detail-label">Role:</span>
                <span id="link-result-role" class="detail-value"></span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Expires:</span>
                <span id="link-result-expires" class="detail-value"></span>
              </div>
            </div>
            <p class="success-message">Share this link with anyone you want to invite to your organization.</p>
          </div>
          
          <div class="step-actions">
            <button id="send-another-invite" class="btn-secondary" data-i18n="organizations:send_another_invite">Send Another Invitation</button>
            <button id="close-invite-result" class="btn-primary" data-i18n="organizations:close_invite_result">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mailbox Modal -->
  <div id="mailbox-modal" class="mailbox-modal">
    <div class="mailbox-modal-content">
      <div class="mailbox-modal-header">
        <h2><i class="fas fa-envelope"></i> Mailbox</h2>
        <button class="mailbox-close-btn" id="mailbox-close-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="mailbox-modal-body">
        <div class="mailbox-tabs">
          <button class="mailbox-tab active" data-tab="invitations">
            <i class="fas fa-user-plus"></i>
            Invitations
          </button>
          <button class="mailbox-tab" data-tab="notifications">
            <i class="fas fa-bell"></i>
            Notifications
          </button>
        </div>
        
        <div class="mailbox-content">
          <!-- Invitations Tab -->
          <div id="invitations-tab" class="mailbox-tab-content active">
            <div class="mailbox-loading" id="invitations-loading">
              <i class="fas fa-spinner fa-spin"></i>
              <span>Loading invitations...</span>
            </div>
            <div class="mailbox-empty" id="invitations-empty" style="display: none;">
              <i class="fas fa-inbox"></i>
              <span>No invitations found</span>
            </div>
            <div class="mailbox-list" id="invitations-list" style="display: none;">
              <!-- Invitations will be populated here -->
            </div>
          </div>
          
          <!-- Notifications Tab -->
          <div id="notifications-tab" class="mailbox-tab-content">
            <div class="mailbox-loading" id="notifications-loading">
              <i class="fas fa-spinner fa-spin"></i>
              <span>Loading notifications...</span>
            </div>
            <div class="mailbox-empty" id="notifications-empty" style="display: none;">
              <i class="fas fa-bell-slash"></i>
              <span>No notifications</span>
            </div>
            <div class="mailbox-list" id="notifications-list" style="display: none;">
              <!-- Notifications will be populated here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Member Detail Modal -->
  <div id="member-detail-modal" class="modal" style="display: none;">
    <div class="modal-content member-detail-modal">
      <div class="modal-header">
        <h3><i class="fas fa-user"></i> <span id="member-detail-title">Member Details</span></h3>
        <button class="modal-close" id="close-member-detail-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div id="member-detail-loading" class="loading-container">
          <div class="loading-spinner"></div>
          <p>Loading member details...</p>
        </div>
        
        <div id="member-detail-content" style="display: none;">
          <!-- Member Header -->
          <div class="member-detail-header">
            <div class="member-detail-avatar" id="member-detail-avatar">
              <i class="fas fa-user"></i>
            </div>
            <div class="member-detail-info">
              <h4 id="member-detail-name">Member Name</h4>
              <p id="member-detail-email">member@example.com</p>
              <span class="member-detail-role" id="member-detail-role">Role</span>
              <span class="member-detail-status" id="member-detail-status">Status</span>
            </div>
          </div>

          <!-- Member Details Tabs -->
          <div class="member-detail-tabs">
            <button class="member-tab active" data-tab="personal">
              <i class="fas fa-user"></i>
              Personal Info
            </button>
            <button class="member-tab" data-tab="employment">
              <i class="fas fa-briefcase"></i>
              Employment
            </button>
            <button class="member-tab" data-tab="banking">
              <i class="fas fa-university"></i>
              Banking
            </button>
            <button class="member-tab" data-tab="documents">
              <i class="fas fa-file-alt"></i>
              Documents
            </button>
          </div>

          <!-- Personal Info Tab -->
          <div id="personal-tab" class="member-tab-content active">
            <div class="detail-section">
              <h5>Contact Information</h5>
              <div class="detail-grid">
                <div class="detail-item">
                  <label>Phone:</label>
                  <span id="member-phone">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Date of Birth:</label>
                  <span id="member-dob">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Bio:</label>
                  <span id="member-bio">N/A</span>
                </div>
              </div>
            </div>
            
            <div class="detail-section">
              <h5>Address Information</h5>
              <div class="detail-grid">
                <div class="detail-item">
                  <label>Address Line 1:</label>
                  <span id="member-address1">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Address Line 2:</label>
                  <span id="member-address2">N/A</span>
                </div>
                <div class="detail-item">
                  <label>City:</label>
                  <span id="member-city">N/A</span>
                </div>
                <div class="detail-item">
                  <label>State/Province:</label>
                  <span id="member-state">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Postal Code:</label>
                  <span id="member-postal">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Country:</label>
                  <span id="member-country">N/A</span>
                </div>
              </div>
            </div>

            <div class="detail-section">
              <h5>Emergency Contact</h5>
              <div class="detail-grid">
                <div class="detail-item">
                  <label>Emergency Contact Name:</label>
                  <span id="member-emergency-name">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Emergency Contact Phone:</label>
                  <span id="member-emergency-phone">N/A</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Employment Tab -->
          <div id="employment-tab" class="member-tab-content">
            <div class="detail-section">
              <h5>Employment Details</h5>
              <div class="detail-grid">
                <div class="detail-item">
                  <label>Job Title:</label>
                  <span id="member-job-title">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Department:</label>
                  <span id="member-department">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Employment Type:</label>
                  <span id="member-employment-type">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Work Location:</label>
                  <span id="member-work-location">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Start Date:</label>
                  <span id="member-start-date">N/A</span>
                </div>
                <div class="detail-item">
                  <label>End Date:</label>
                  <span id="member-end-date">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Salary:</label>
                  <span id="member-salary">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Currency:</label>
                  <span id="member-currency">N/A</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Banking Tab -->
          <div id="banking-tab" class="member-tab-content">
            <div class="detail-section">
              <h5>Banking Information</h5>
              <div class="detail-grid">
                <div class="detail-item">
                  <label>IBAN:</label>
                  <span id="member-iban">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Bank Name:</label>
                  <span id="member-bank-name">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Bank Country:</label>
                  <span id="member-bank-country">N/A</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Documents Tab -->
          <div id="documents-tab" class="member-tab-content">
            <div class="detail-section">
              <h5>Documents</h5>
              <div class="detail-grid">
                <div class="detail-item">
                  <label>Tax ID Document:</label>
                  <span id="member-tax-doc">N/A</span>
                </div>
                <div class="detail-item">
                  <label>National ID Document:</label>
                  <span id="member-national-doc">N/A</span>
                </div>
                <div class="detail-item">
                  <label>Passport Document:</label>
                  <span id="member-passport-doc">N/A</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Member Actions -->
        <div class="member-detail-actions" id="member-detail-actions" style="display: none;">
          <button class="btn-secondary" id="edit-member-btn">
            <i class="fas fa-edit"></i>
            Edit Member
          </button>
          <button class="btn-danger" id="remove-member-btn">
            <i class="fas fa-user-minus"></i>
            Remove from Organization
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Remove Member Confirmation Modal -->
  <div id="remove-member-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-exclamation-triangle"></i> Remove Member</h3>
        <button class="modal-close" id="close-remove-member-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="confirmation-content">
          <div class="confirmation-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <h4>Are you sure you want to remove this member?</h4>
          <p id="remove-member-message">This action will remove the member from your organization. They will no longer have access to organization resources.</p>
          <div class="confirmation-details">
            <p><strong>Member:</strong> <span id="remove-member-name">Member Name</span></p>
            <p><strong>Email:</strong> <span id="remove-member-email">member@example.com</span></p>
            <p><strong>Role:</strong> <span id="remove-member-role">Role</span></p>
          </div>
          <div class="confirmation-warning">
            <p><i class="fas fa-info-circle"></i> <strong>Note:</strong> This action cannot be undone. The member will need to be re-invited if you want them to rejoin the organization.</p>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn-secondary" id="cancel-remove-member">Cancel</button>
          <button class="btn-danger" id="confirm-remove-member">
            <i class="fas fa-user-minus"></i>
            Remove Member
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Member Modal -->
  <div id="edit-member-modal" class="modal" style="display: none;">
    <div class="modal-content edit-member-modal">
      <div class="modal-header">
        <h3><i class="fas fa-edit"></i> <span id="edit-member-title">Edit Member</span></h3>
        <button class="modal-close" id="close-edit-member-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div id="edit-member-loading" class="loading-container">
          <div class="loading-spinner"></div>
          <p>Loading member information...</p>
        </div>
        
        <form id="edit-member-form" style="display: none;">
          <!-- Edit Member Tabs -->
          <div class="edit-member-tabs">
            <button type="button" class="edit-tab active" data-tab="personal">
              <i class="fas fa-user"></i>
              Personal Info
            </button>
            <button type="button" class="edit-tab" data-tab="employment">
              <i class="fas fa-briefcase"></i>
              Employment
            </button>
            <button type="button" class="edit-tab" data-tab="banking">
              <i class="fas fa-university"></i>
              Banking
            </button>
            <button type="button" class="edit-tab" data-tab="role">
              <i class="fas fa-user-tag"></i>
              Role & Status
            </button>
          </div>

          <!-- Personal Info Tab -->
          <div id="edit-personal-tab" class="edit-tab-content active">
            <div class="form-row">
              <div class="form-group">
                <label for="edit-first-name">First Name *</label>
                <input type="text" id="edit-first-name" name="first_name" required>
              </div>
              <div class="form-group">
                <label for="edit-last-name">Last Name *</label>
                <input type="text" id="edit-last-name" name="last_name" required>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-email">Email *</label>
                <input type="email" id="edit-email" name="email" required>
              </div>
              <div class="form-group">
                <label for="edit-phone">Phone</label>
                <input type="tel" id="edit-phone" name="phone">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="edit-date-of-birth">Date of Birth</label>
                <input type="date" id="edit-date-of-birth" name="date_of_birth">
              </div>
              <div class="form-group">
                <label for="edit-bio">Bio</label>
                <textarea id="edit-bio" name="bio" rows="3"></textarea>
              </div>
            </div>

            <div class="form-section">
              <h4>Address Information</h4>
              <div class="form-row">
                <div class="form-group">
                  <label for="edit-address-line1">Address Line 1</label>
                  <input type="text" id="edit-address-line1" name="address_line1">
                </div>
                <div class="form-group">
                  <label for="edit-address-line2">Address Line 2</label>
                  <input type="text" id="edit-address-line2" name="address_line2">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="edit-city">City</label>
                  <input type="text" id="edit-city" name="city">
                </div>
                <div class="form-group">
                  <label for="edit-state">State/Province</label>
                  <input type="text" id="edit-state" name="state_province">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="edit-postal">Postal Code</label>
                  <input type="text" id="edit-postal" name="postal_code">
                </div>
                <div class="form-group">
                  <label for="edit-country">Country</label>
                  <input type="text" id="edit-country" name="country">
                </div>
              </div>
            </div>

            <div class="form-section">
              <h4>Emergency Contact</h4>
              <div class="form-row">
                <div class="form-group">
                  <label for="edit-emergency-name">Emergency Contact Name</label>
                  <input type="text" id="edit-emergency-name" name="emergency_contact_name">
                </div>
                <div class="form-group">
                  <label for="edit-emergency-phone">Emergency Contact Phone</label>
                  <input type="tel" id="edit-emergency-phone" name="emergency_contact_phone">
                </div>
              </div>
            </div>
          </div>

          <!-- Employment Tab -->
          <div id="edit-employment-tab" class="edit-tab-content">
            <div class="form-row">
              <div class="form-group">
                <label for="edit-job-title">Job Title</label>
                <input type="text" id="edit-job-title" name="job_title">
              </div>
              <div class="form-group">
                <label for="edit-department">Department</label>
                <input type="text" id="edit-department" name="department">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-employment-type">Employment Type</label>
                <select id="edit-employment-type" name="employment_type">
                  <option value="">Select Type</option>
                  <option value="full-time">Full Time</option>
                  <option value="part-time">Part Time</option>
                  <option value="contract">Contract</option>
                  <option value="internship">Internship</option>
                  <option value="freelance">Freelance</option>
                </select>
              </div>
              <div class="form-group">
                <label for="edit-work-location">Work Location</label>
                <input type="text" id="edit-work-location" name="work_location">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-start-date">Employment Start Date</label>
                <input type="date" id="edit-start-date" name="employment_start_date">
              </div>
              <div class="form-group">
                <label for="edit-end-date">Employment End Date</label>
                <input type="date" id="edit-end-date" name="employment_end_date">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-salary">Salary</label>
                <input type="number" id="edit-salary" name="salary" step="0.01" min="0">
              </div>
              <div class="form-group">
                <label for="edit-currency">Currency</label>
                <select id="edit-currency" name="currency">
                  <option value="EUR">EUR (€)</option>
                  <option value="USD">USD ($)</option>
                  <option value="GBP">GBP (£)</option>
                  <option value="JPY">JPY (¥)</option>
                  <option value="CAD">CAD (C$)</option>
                  <option value="AUD">AUD (A$)</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Banking Tab -->
          <div id="edit-banking-tab" class="edit-tab-content">
            <div class="form-row">
              <div class="form-group">
                <label for="edit-iban">IBAN</label>
                <input type="text" id="edit-iban" name="iban">
              </div>
              <div class="form-group">
                <label for="edit-bank-name">Bank Name</label>
                <input type="text" id="edit-bank-name" name="bank_name">
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="edit-bank-country">Bank Country</label>
                <input type="text" id="edit-bank-country" name="bank_country">
              </div>
            </div>
          </div>

          <!-- Role & Status Tab -->
          <div id="edit-role-tab" class="edit-tab-content">
            <div class="form-row">
              <div class="form-group">
                <label for="edit-role">Role</label>
                <select id="edit-role" name="role">
                  <option value="employee">Employee</option>
                  <option value="organization_member">Organization Member</option>
                  <option value="manager">Manager</option>
                  <option value="admin">Admin</option>
                </select>
              </div>
              <div class="form-group">
                <label for="edit-status">Status</label>
                <select id="edit-status" name="is_active">
                  <option value="true">Active</option>
                  <option value="false">Inactive</option>
                </select>
              </div>
            </div>
            
            <div class="form-section">
              <h4>Role Change Warning</h4>
              <div class="warning-message">
                <i class="fas fa-exclamation-triangle"></i>
                <p><strong>Important:</strong> Changing a member's role will affect their permissions and access levels within the organization. Please ensure this change is appropriate and necessary.</p>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn-secondary" id="cancel-edit-member">Cancel</button>
            <button type="submit" class="btn-primary" id="save-edit-member">
              <i class="fas fa-save"></i>
              Save Changes
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Add Member Modal -->
  <div id="add-member-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 data-i18n="organizations:add_offline_member">Add Offline Member</h3>
        <button class="modal-close" id="close-add-member-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="add-member-form">
          <!-- Step Progress Indicator -->
          <div class="form-step-progress">
            <div class="step active" data-step="1">
              <div class="step-number">1</div>
              <div class="step-label" data-i18n="organizations:basic_info">Basic Info</div>
            </div>
            <div class="step" data-step="2">
              <div class="step-number">2</div>
              <div class="step-label" data-i18n="organizations:employment">Employment</div>
            </div>
            <div class="step" data-step="3">
              <div class="step-number">3</div>
              <div class="step-label" data-i18n="organizations:banking">Banking</div>
            </div>
            <div class="step" data-step="4">
              <div class="step-number">4</div>
              <div class="step-label" data-i18n="organizations:documents">Documents</div>
            </div>
          </div>

          <!-- Step 1: Basic Information -->
          <div class="form-step active" data-step="1">
            <div class="step-header">
              <h4 data-i18n="organizations:basic_information">Basic Information</h4>
              <p data-i18n="organizations:basic_info_description">Enter the member's basic personal information</p>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="member-first-name" data-i18n="organizations:first_name">First Name *</label>
                <input type="text" id="member-first-name" name="first_name" required>
              </div>
              <div class="form-group">
                <label for="member-last-name" data-i18n="organizations:last_name">Last Name *</label>
                <input type="text" id="member-last-name" name="last_name" required>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="member-email" data-i18n="organizations:email">Email Address *</label>
                <input type="email" id="member-email" name="email" required>
              </div>
              <div class="form-group">
                <label for="member-phone" data-i18n="organizations:phone">Phone Number</label>
                <input type="tel" id="member-phone" name="phone">
              </div>
            </div>

            <div class="form-group">
              <label for="member-date-of-birth" data-i18n="organizations:date_of_birth">Date of Birth</label>
              <input type="date" id="member-date-of-birth" name="date_of_birth">
            </div>

            <div class="form-group">
              <label for="member-bio" data-i18n="organizations:bio">Bio</label>
              <textarea id="member-bio" name="bio" rows="3"></textarea>
            </div>
          </div>

          <!-- Step 2: Employment Information -->
          <div class="form-step" data-step="2">
            <div class="step-header">
              <h4 data-i18n="organizations:employment_information">Employment Information</h4>
              <p data-i18n="organizations:employment_info_description">Enter employment details and work information</p>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="member-role" data-i18n="organizations:role">Role *</label>
                <select id="member-role" name="role" required>
                  <option value="" data-i18n="organizations:select_role">Select a role</option>
                  <option value="organization_member" data-i18n="organizations:organization_member">Organization Member</option>
                  <option value="employee" data-i18n="organizations:employee">Employee</option>
                  <option value="manager" data-i18n="organizations:manager">Manager</option>
                </select>
              </div>
              <div class="form-group">
                <label for="member-job-title" data-i18n="organizations:job_title">Job Title</label>
                <input type="text" id="member-job-title" name="job_title">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="member-department" data-i18n="organizations:department">Department</label>
                <input type="text" id="member-department" name="department">
              </div>
              <div class="form-group">
                <label for="member-employment-type" data-i18n="organizations:employment_type">Employment Type</label>
                <select id="member-employment-type" name="employment_type">
                  <option value="" data-i18n="organizations:select_employment_type">Select type</option>
                  <option value="full_time" data-i18n="organizations:full_time">Full Time</option>
                  <option value="part_time" data-i18n="organizations:part_time">Part Time</option>
                  <option value="contractor" data-i18n="organizations:contractor">Contractor</option>
                  <option value="intern" data-i18n="organizations:intern">Intern</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="member-employment-start-date" data-i18n="organizations:employment_start_date">Start Date</label>
                <input type="date" id="member-employment-start-date" name="employment_start_date">
              </div>
              <div class="form-group">
                <label for="member-work-location" data-i18n="organizations:work_location">Work Location</label>
                <select id="member-work-location" name="work_location">
                  <option value="" data-i18n="organizations:select_work_location">Select location</option>
                  <option value="onsite" data-i18n="organizations:onsite">On-site</option>
                  <option value="remote" data-i18n="organizations:remote">Remote</option>
                  <option value="hybrid" data-i18n="organizations:hybrid">Hybrid</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="member-salary" data-i18n="organizations:salary">Annual Salary</label>
                <input type="number" id="member-salary" name="salary" step="0.01" min="0">
              </div>
              <div class="form-group">
                <label for="member-currency" data-i18n="organizations:currency">Currency</label>
                <select id="member-currency" name="currency">
                  <option value="EUR" data-i18n="organizations:eur">EUR</option>
                  <option value="USD" data-i18n="organizations:usd">USD</option>
                  <option value="GBP" data-i18n="organizations:gbp">GBP</option>
                  <option value="CAD" data-i18n="organizations:cad">CAD</option>
                  <option value="AUD" data-i18n="organizations:aud">AUD</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Step 3: Banking Information -->
          <div class="form-step" data-step="3">
            <div class="step-header">
              <h4 data-i18n="organizations:banking_information">Banking Information</h4>
              <p data-i18n="organizations:banking_info_description">Enter banking details for payroll and payments</p>
            </div>
            
            <div class="form-group">
              <label for="member-iban" data-i18n="organizations:iban">IBAN *</label>
              <input type="text" id="member-iban" name="iban" placeholder="GR1234567890123456789012345">
            </div>

            <div class="form-group">
              <label for="member-bank-name" data-i18n="organizations:bank_name">Bank Name</label>
              <input type="text" id="member-bank-name" name="bank_name">
            </div>
          </div>

          <!-- Step 4: Documents and Additional Information -->
          <div class="form-step" data-step="4">
            <div class="step-header">
              <h4 data-i18n="organizations:documents_and_additional">Documents & Additional Information</h4>
              <p data-i18n="organizations:documents_description">Enter identification and contact information</p>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="member-tax-id-document" data-i18n="organizations:tax_id_document">Tax ID Document</label>
                <div class="file-upload-wrapper">
                  <input type="file" id="member-tax-id-document" name="tax_id_document" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" class="file-input">
                  <div class="file-upload-display">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span class="file-upload-text">Choose file or drag here</span>
                    <span class="file-upload-info">PDF, JPG, PNG, DOC (max 5MB)</span>
                  </div>
                  <div class="file-preview" id="tax-id-preview" style="display: none;">
                    <i class="fas fa-file-alt"></i>
                    <span class="file-name"></span>
                    <button type="button" class="file-remove" onclick="removeFile('member-tax-id-document')">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="member-national-id-document" data-i18n="organizations:national_id_document">National ID Document</label>
                <div class="file-upload-wrapper">
                  <input type="file" id="member-national-id-document" name="national_id_document" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" class="file-input">
                  <div class="file-upload-display">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span class="file-upload-text">Choose file or drag here</span>
                    <span class="file-upload-info">PDF, JPG, PNG, DOC (max 5MB)</span>
                  </div>
                  <div class="file-preview" id="national-id-preview" style="display: none;">
                    <i class="fas fa-file-alt"></i>
                    <span class="file-name"></span>
                    <button type="button" class="file-remove" onclick="removeFile('member-national-id-document')">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="member-passport-document" data-i18n="organizations:passport_document">Passport Document</label>
                <div class="file-upload-wrapper">
                  <input type="file" id="member-passport-document" name="passport_document" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" class="file-input">
                  <div class="file-upload-display">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span class="file-upload-text">Choose file or drag here</span>
                    <span class="file-upload-info">PDF, JPG, PNG, DOC (max 5MB)</span>
                  </div>
                  <div class="file-preview" id="passport-preview" style="display: none;">
                    <i class="fas fa-file-alt"></i>
                    <span class="file-name"></span>
                    <button type="button" class="file-remove" onclick="removeFile('member-passport-document')">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="member-emergency-contact-name" data-i18n="organizations:emergency_contact_name">Emergency Contact Name</label>
                <input type="text" id="member-emergency-contact-name" name="emergency_contact_name">
              </div>
            </div>

            <div class="form-group">
              <label for="member-emergency-contact-phone" data-i18n="organizations:emergency_contact_phone">Emergency Contact Phone</label>
              <input type="tel" id="member-emergency-contact-phone" name="emergency_contact_phone">
            </div>

            <div class="form-group">
              <label for="member-address-line1" data-i18n="organizations:address_line1">Address Line 1</label>
              <input type="text" id="member-address-line1" name="address_line1">
            </div>

            <div class="form-group">
              <label for="member-address-line2" data-i18n="organizations:address_line2">Address Line 2</label>
              <input type="text" id="member-address-line2" name="address_line2">
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="member-city" data-i18n="organizations:city">City</label>
                <input type="text" id="member-city" name="city">
              </div>
              <div class="form-group">
                <label for="member-state-province" data-i18n="organizations:state_province">State/Province</label>
                <input type="text" id="member-state-province" name="state_province">
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="member-postal-code" data-i18n="organizations:postal_code">Postal Code</label>
                <input type="text" id="member-postal-code" name="postal_code">
              </div>
              <div class="form-group">
                <label for="member-country" data-i18n="organizations:country">Country</label>
                <input type="text" id="member-country" name="country">
              </div>
            </div>
          </div>

          <!-- Form Navigation -->
          <div class="form-navigation">
            <button type="button" class="btn-secondary" id="add-member-prev-step-btn" style="display: none;">
              <i class="fas fa-arrow-left"></i>
              <span data-i18n="common:previous">Previous</span>
            </button>
            <button type="button" class="btn-secondary" id="add-member-next-step-btn">
              <span data-i18n="common:next">Next</span>
              <i class="fas fa-arrow-right"></i>
            </button>
            <button type="submit" class="btn-primary" id="add-member-submit-form-btn" style="display: none;">
              <span class="btn-text" data-i18n="organizations:add_member">Add Member</span>
              <span class="btn-loading" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i>
                <span data-i18n="common:processing">Adding...</span>
              </span>
            </button>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn-secondary" id="cancel-add-member-btn" data-i18n="common:cancel">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script type="module" src="js/i18n.js"></script>
  <script src="js/language-switcher.js"></script>
  <script src="js/shared.js"></script>
  <script src="js/organizations.js"></script>
  <script src="js/mailbox.js"></script>
</body>

</html> 